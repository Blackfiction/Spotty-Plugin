#!/usr/bin/env perl -w

use strict;
use HTTP::Request;
use LWP::UserAgent;

use constant MESSAGE => '{"id":0,"params":["%s",["spotty"]],"method":"slim.request"}';

my ($port, $client) = @ARGV;

exit unless $port && $client;

$client =~ s/-/:/g;

my $ua = LWP::UserAgent->new( timeout => 1 );
my $req = HTTP::Request->new( POST => "http://localhost:${port}/jsonrpc.js" );
$req->content(sprintf(MESSAGE, $client));
$ua->request( $req );

1;
